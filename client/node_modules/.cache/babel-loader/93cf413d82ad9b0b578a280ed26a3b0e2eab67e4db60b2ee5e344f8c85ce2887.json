{"ast":null,"code":"import _slicedToArray from\"/home/mulubrhan/alx/social_media_for_alx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import M from\"materialize-css\";import{UserContext}from\"../../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(){var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var PostData=function PostData(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"/signin\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{localStorage.setItem(\"jwt\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));dispatch({type:\"USER\",payload:data.user});M.toast({html:\"sidin succesfully\",classes:\"#43a047 green darken-1\"});navigate(\"/\");}});};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card input-field\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return PostData();},children:\"Login\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Don't have an account?\"})})]})});};export default SignIn;","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","M","UserContext","jsx","_jsx","jsxs","_jsxs","SignIn","_useContext","state","dispatch","navigate","_useState","_useState2","_slicedToArray","password","setPassword","_useState3","_useState4","email","setEmail","PostData","test","toast","html","classes","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","error","localStorage","setItem","token","user","type","payload","className","children","placeholder","value","onChange","e","target","onClick","to"],"sources":["/home/mulubrhan/alx/social_media_for_alx/client/src/components/screens/Signin.js"],"sourcesContent":["import React, { useState,useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport M from \"materialize-css\";\nimport {UserContext} from \"../../App\"\n\nconst SignIn = ()=>{\n  const {state,dispatch} = useContext(UserContext)\n  const navigate = useNavigate();\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const PostData = () => {\n    if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email))\n    {\n        M.toast({ html: \"invalid email\", classes: \"#c62828 red darken-3\" });\n        return\n    }\n    fetch(\"/signin\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ password, email }),\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log(data)\n        if (data.error) {\n          M.toast({ html: data.error, classes: \"#c62828 red darken-3\" });\n        } else {\n          localStorage.setItem(\"jwt\",data.token)\n          localStorage.setItem(\"user\",JSON.stringify(data.user))\n          dispatch({type:\"USER\",payload:data.user})\n          M.toast({ html: \"sidin succesfully\", classes: \"#43a047 green darken-1\" });\n          navigate(\"/\");\n        }\n      });\n  };\n    return(\n       <div className=\"mycard\">\n        <div className=\"card auth-card input-field\">\n            <h2>Instagram</h2>\n            <input type=\"text\" placeholder=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} />\n            <input type=\"password\" placeholder=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\" onClick={()=>PostData()}>\n                Login\n            </button>\n            <h5>\n                <Link to=\"/signup\">Don't have an account?</Link>\n            </h5>\n        </div>\n       </div>\n    )\n}\n\nexport default SignIn"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}