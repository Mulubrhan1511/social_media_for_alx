{"ast":null,"code":"import _objectSpread from\"/home/mulubrhan/alx/social_media_for_alx/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/mulubrhan/alx/social_media_for_alx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{UserContext}from\"../../App\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mypics=_useState2[0],setPics=_useState2[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var user=JSON.parse(localStorage.getItem(\"user\"));var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];useEffect(function(){fetch(\"/mypost\",{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){setPics(result.mypost);});},[]);useEffect(function(){if(image){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"insta-clone\");data.append(\"cloud_name\",\"dhw1mueq4\");fetch(\"https://api.cloudinary.com/v1_1/dhw1mueq4/image/upload\",{method:\"POST\",body:data}).then(function(res){return res.json();}).then(function(data){fetch(\"/updatepic\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({pic:data.url})}).then(function(res){return res.json();}).then(function(result){localStorage.setItem(\"user\",JSON.stringify(_objectSpread(_objectSpread({},user),{},{pic:data.url}))// Update the user data with the new profile picture URL\n);dispatch({type:\"UPDATEPIC\",payload:data.url});});}).catch(function(err){console.log(err);});}},[image]);var updatePhoto=function updatePhoto(file){setImage(file);};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"550px\",margin:\"0px auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"18px 0px\",borderBottom:\"1px solid grey\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\"},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{style:{width:\"160px\",height:\"160px\",borderRadius:\"80px\"},src:user?user.pic:\"loading\",alt:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:user?user.name:\"loading\"}),/*#__PURE__*/_jsx(\"h5\",{children:user?user.email:\"loading\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",width:\"108%\"},children:[/*#__PURE__*/_jsxs(\"h5\",{children:[mypics.length||0,\" Posts\"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[user?user.followers.length:0,\" followers\"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[user?user.following.length:0,\" following\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",style:{margin:\"10px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn #64b5f6 blue darken-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return updatePhoto(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:mypics.map(function(item){return/*#__PURE__*/_jsx(\"img\",{className:\"item\",src:item.photo,alt:item.title},item._id);})})]});};export default Profile;","map":{"version":3,"names":["React","useContext","useEffect","useState","UserContext","jsx","_jsx","jsxs","_jsxs","Profile","_useState","_useState2","_slicedToArray","mypics","setPics","_useContext","state","dispatch","user","JSON","parse","localStorage","getItem","_useState3","_useState4","image","setImage","fetch","headers","Authorization","then","res","json","result","mypost","data","FormData","append","method","body","stringify","pic","url","setItem","_objectSpread","type","payload","catch","err","console","log","updatePhoto","file","style","maxWidth","margin","children","borderBottom","display","justifyContent","width","height","borderRadius","src","alt","name","email","length","followers","following","className","onChange","e","target","files","map","item","photo","title","_id"],"sources":["/home/mulubrhan/alx/social_media_for_alx/client/src/components/screens/Profile.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { UserContext } from \"../../App\";\n\nconst Profile = () => {\n  const [mypics, setPics] = useState([]);\n  const { state, dispatch } = useContext(UserContext);\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const [image, setImage] = useState(\"\");\n\n  useEffect(() => {\n    fetch(\"/mypost\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setPics(result.mypost);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (image) {\n      const data = new FormData();\n      data.append(\"file\", image);\n      data.append(\"upload_preset\", \"insta-clone\");\n      data.append(\"cloud_name\", \"dhw1mueq4\");\n      fetch(\"https://api.cloudinary.com/v1_1/dhw1mueq4/image/upload\", {\n        method: \"POST\",\n        body: data,\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          fetch(\"/updatepic\", {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n            },\n            body: JSON.stringify({\n              pic: data.url,\n            }),\n          })\n            .then((res) => res.json())\n            .then((result) => {\n              localStorage.setItem(\n                \"user\",\n                JSON.stringify({ ...user, pic: data.url }) // Update the user data with the new profile picture URL\n              );\n              dispatch({ type: \"UPDATEPIC\", payload: data.url });\n            });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [image]);\n\n  const updatePhoto = (file) => {\n    setImage(file);\n  };\n\n  return (\n    <div style={{ maxWidth: \"550px\", margin: \"0px auto\" }}>\n      <div\n        style={{\n          margin: \"18px 0px\",\n          borderBottom: \"1px solid grey\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-around\",\n          }}\n        >\n          <div>\n            <img\n              style={{ width: \"160px\", height: \"160px\", borderRadius: \"80px\" }}\n              src={user ? user.pic : \"loading\"}\n              alt=\"Profile\"\n            />\n          </div>\n          <div>\n            <h5>{user ? user.name : \"loading\"}</h5>\n            <h5>{user ? user.email : \"loading\"}</h5>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                width: \"108%\",\n              }}\n            >\n              <h5>{mypics.length || 0} Posts</h5>\n              <h5>{user ? user.followers.length : 0} followers</h5>\n              <h5>{user ? user.following.length : 0} following</h5>\n            </div>\n          </div>\n        </div>\n        <div className=\"file-field input-field\" style={{ margin: \"10px\" }}>\n          <div className=\"btn #64b5f6 blue darken-1\">\n            <span>Upload image</span>\n            <input type=\"file\" onChange={(e) => updatePhoto(e.target.files[0])} />\n          </div>\n          <div className=\"file-path-wrapper\">\n            <input className=\"file-path validate\" type=\"text\" />\n          </div>\n        </div>\n      </div>\n      <div className=\"gallery\">\n        {mypics.map((item) => {\n          return (\n            <img key={item._id} className=\"item\" src={item.photo} alt={item.title} />\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}