{"ast":null,"code":"import _slicedToArray from\"/home/mulubrhan/alx/social_media_for_alx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import M from\"materialize-css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CretePost=function CretePost(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];useEffect(function(){if(url){fetch(\"/creatpost\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:\"Created post successfully\",classes:\"#43a047 green darken-1\"});navigate(\"/\");}});}},[url]);var postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"insta-clone\");data.append(\"cloud_name\",\"dhw1mueq4\");fetch(\"https://api.cloudinary.com/v1_1/dhw1mueq4/image/upload\",{method:'POST',body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-filed\",style:{margin:\"30px auto\",maxWidth:\"500px\",padding:\"20px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){return setBody(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn #64b5f6 blue darken-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Upload image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return postDetails();},children:\"Submit Post\"})]});};export default CretePost;","map":{"version":3,"names":["React","useState","useEffect","M","useNavigate","jsx","_jsx","jsxs","_jsxs","CretePost","navigate","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","body","setBody","_useState5","_useState6","image","setImage","_useState7","_useState8","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","error","toast","html","classes","postDetails","FormData","append","catch","err","console","log","className","style","margin","maxWidth","padding","textAlign","children","type","placeholder","value","onChange","e","target","files","onClick"],"sources":["/home/mulubrhan/alx/social_media_for_alx/client/src/components/screens/CreatePost.js"],"sourcesContent":["import React, { useState,useEffect } from \"react\";\nimport M from \"materialize-css\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst CretePost = ()=>{\n    const navigate = useNavigate();\n    const [title,setTitle] = useState(\"\")\n    const [body,setBody] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(\"\")\n    useEffect(()=>{\n        if(url){\n            fetch(\"/creatpost\", {\n                method: \"POST\",\n                headers: { \n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\":\"Bearer \" + localStorage.getItem(\"jwt\")\n            },\n                body: JSON.stringify({ \n                    title, \n                    body,\n                    pic:url\n                 }),\n              })\n                .then(res => res.json())\n                .then(data => {\n                  \n                  if (data.error) {\n                    M.toast({ html: data.error, classes: \"#c62828 red darken-3\" });\n                  } else {\n                    M.toast({ html: \"Created post successfully\", classes: \"#43a047 green darken-1\" });\n                    navigate(\"/\");\n                  }\n                });\n        }\n    },[url])\n    const postDetails = ()=>{\n        const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"insta-clone\")\n        data.append(\"cloud_name\",\"dhw1mueq4\")\n        fetch(\"https://api.cloudinary.com/v1_1/dhw1mueq4/image/upload\",{\n            method:'POST',\n            body:data\n        })\n        .then((res)=>res.json())\n        .then(data=>{\n            setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n        \n    }\n    return(\n        <div className=\"card input-filed\"\n        style={{\n            margin:\"30px auto\",\n            maxWidth:\"500px\",\n            padding:\"20px\",\n            textAlign:\"center\"\n        }}>\n            <input type=\"text\" placeholder=\"title\" value={title} onChange={(e) => setTitle(e.target.value)}/>\n            <input type=\"text\" placeholder=\"body\" value={body} onChange={(e) => setBody(e.target.value)}/>\n            <div className=\"file-field input-field\">\n                <div className=\"btn #64b5f6 blue darken-1\">\n                    <span>Upload image</span>\n                    <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])}/>\n                </div>\n                <div className=\"file-path-wrapper\">\n                    <input className=\"file-path validate\" type=\"text\" />\n                </div>\n            </div>\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\" onClick={()=>postDetails()}>\n                Submit Post\n            </button>\n        </div>\n    )\n}\nexport default CretePost;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}